{% extends "layout.html" %}
{% block title %}Calendar{% endblock %}
{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.2/main.min.css">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.2/main.min.js"></script>
  <style type="text/css">
    .important { color: #336699; }
    #calendar{
      max-height: 80vh;
      margin: 20px 0 50px 0;
    }
  </style>
{% endblock %}
{% block content %}
<div id="calendar"></div>

<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'timeGridWeek',
      selectable: true,
      selectMirror: true,
      editable: true,
      eventDrop: function(data) {console.log(data)},
      select: function(data) {
        // create
        console.log(data.end, data.start);
        $.ajax(`/calendar/event/update/`)
      },
      eventClick: function(data) {
        console.log(data);
      },
      headerToolbar: {
        center: 'dayGridMonth,timeGridWeek,listWeek', // buttons for switching between views
      },
      events: [
        {% for event in events %}
          {
            title: "{{event.title}}",
            start: "{{event.start}}",
            end: "{{event.end}}",
            url: "/calendar/event/{{event.event_id}}"
          },
        {% endfor %}
    ]
    });
    calendar.render();
  });
</script>
{% endblock %}
